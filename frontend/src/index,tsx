import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import './index.css';
import CockroachGame from './App';

const initTelegramWebApp = () => {
  if (window.Telegram?.WebApp) {
    try {
      const webApp = window.Telegram.WebApp;
      webApp.ready();
      webApp.expand();

      // Убираем кнопку, так как в этой игре она не нужна
      // webApp.MainButton.hide();

      console.log('Telegram WebApp инициализирован');
      return true;
    } catch (error) {
      console.error('Ошибка инициализации Telegram WebApp:', error);
    }
  }
  return false;
};

// Пытаемся инициализировать Telegram WebApp
if (!initTelegramWebApp()) {
  console.warn('Приложение запущено вне Telegram. Функции Telegram недоступны.');
}

// Рендеринг приложения
const container = document.getElementById('root');
if (container) {
  const root = createRoot(container);
  root.render(
    <StrictMode>
      <CockroachGame />
    </StrictMode>
  );
}